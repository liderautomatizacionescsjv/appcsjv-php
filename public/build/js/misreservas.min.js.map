{"version":3,"sources":["misreservas.js"],"names":["async","cargarMisReservas","respuesta","fetch","reservas","json","tabla","document","getElementById","innerHTML","error","forEach","reserva","fila","createElement","nombre_carro","grupo","fecha","horaInicio","horaFin","cantidadComputadores","id","appendChild","console","eliminarReserva","confirm","formData","FormData","append","method","body","resultado","mostrarNotificacion","alert","mensaje","contenedor","notificacion","classList","add","setTimeout","style","opacity","transform","remove","addEventListener"],"mappings":"AAKAA,eAAeC,oBACX,IACI,MAAMC,QAAkBC,MAAM,qBACxBC,QAAiBF,EAAUG,OAE3BC,EAAQC,SAASC,eAAe,kBAGtC,GAFAF,EAAMG,UAAY,GAEdL,EAASM,MAET,YADAJ,EAAMG,UAAY,uBAAuBL,EAASM,mBAItDN,EAASO,QAAQC,IACb,MAAMC,EAAON,SAASO,cAAc,MAEpCD,EAAKJ,UAAY,yBACPG,EAAQG,0CACRH,EAAQI,mCACRJ,EAAQK,mCACRL,EAAQM,wCACRN,EAAQO,qCACRP,EAAQQ,8HAE8CR,EAAQS,8DAIxEf,EAAMgB,YAAYT,KAExB,MAAOH,GACLa,QAAQb,MAAM,2BAA4BA,IAIlDV,eAAewB,gBAAgBH,GAC3B,GAAKI,QAAQ,2CAEb,IACI,MAAMC,EAAW,IAAIC,SACrBD,EAASE,OAAO,KAAMP,GAEtB,MAAMnB,QAAkBC,MAAM,wBAAyB,CACnD0B,OAAQ,OACRC,KAAMJ,WAGcxB,EAAUG,QAEpB0B,WACVC,oBAAoB,mCACpB/B,qBAEAgC,MAAM,gCAEZ,MAAOvB,GACLa,QAAQb,MAAM,6BAA8BA,IAMpD,SAASsB,oBAAoBE,GACzB,MAAMC,EAAa5B,SAASC,eAAe,0BAGrC4B,EAAe7B,SAASO,cAAc,OAC5CsB,EAAaC,UAAUC,IAAI,gBAG3BF,EAAa3B,UAAY,YAAYyB,EAIrCC,EAAWb,YAAYc,GAGvBG,WAAW,KACPH,EAAaI,MAAMC,QAAU,IAC7BL,EAAaI,MAAME,UAAY,iBAChC,KAGHH,WAAW,KACPH,EAAaI,MAAMC,QAAU,IAC7BL,EAAaI,MAAME,UAAY,oBAC/BH,WAAW,KACPH,EAAaO,UACd,MACJ,KA7FPpC,SAASqC,iBAAiB,oBAAoB,WAC1C3C","file":"misreservas.min.js","sourcesContent":["\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    cargarMisReservas();\n});\n\nasync function cargarMisReservas() {\n    try {\n        const respuesta = await fetch(\"/api/mis-reservas\");\n        const reservas = await respuesta.json();\n\n        const tabla = document.getElementById(\"tabla-reservas\");\n        tabla.innerHTML = \"\"; // Limpiar tabla antes de agregar nuevas filas\n\n        if (reservas.error) {\n            tabla.innerHTML = `<tr><td colspan=\"7\">${reservas.error}</td></tr>`;\n            return;\n        }\n\n        reservas.forEach(reserva => {\n            const fila = document.createElement(\"tr\");\n\n            fila.innerHTML = `\n                <td>${reserva.nombre_carro}</td>\n                <td>${reserva.grupo}</td>\n                <td>${reserva.fecha}</td>\n                <td>${reserva.horaInicio}</td>\n                <td>${reserva.horaFin}</td>\n                <td>${reserva.cantidadComputadores}</td>\n                <td>\n                    <button class=\"btn-eliminar\" onclick=\"eliminarReserva(${reserva.id})\">Eliminar</button>\n                </td>\n            `;\n\n            tabla.appendChild(fila);\n        });\n    } catch (error) {\n        console.error(\"Error cargando reservas:\", error);\n    }\n}\n\nasync function eliminarReserva(id) {\n    if (!confirm(\"¿Estás seguro de eliminar esta reserva?\")) return;\n\n    try {\n        const formData = new FormData();\n        formData.append(\"id\", id);\n\n        const respuesta = await fetch(\"/api/eliminar-reserva\", {\n            method: \"POST\",\n            body: formData\n        });\n\n        const resultado = await respuesta.json();\n\n        if (resultado.resultado) {\n            mostrarNotificacion(\"Reserva eliminada correctamente\");\n            cargarMisReservas(); // Recargar la tabla\n        } else {\n            alert(\"Error al eliminar la reserva\");\n        }\n    } catch (error) {\n        console.error(\"Error al eliminar reserva:\", error);\n    }\n}\n\n// NOTIFICACION\n\nfunction mostrarNotificacion(mensaje) {\n    const contenedor = document.getElementById(\"notificacion-container\");\n\n    // Crear la notificación\n    const notificacion = document.createElement(\"div\");\n    notificacion.classList.add(\"notificacion\");\n\n    // Agregar contenido con ícono y texto\n    notificacion.innerHTML = `<i>✅</i> ${mensaje}`;\n\n\n    // Agregar la notificación al contenedor\n    contenedor.appendChild(notificacion);\n\n    // Mostrar con animación\n    setTimeout(() => {\n        notificacion.style.opacity = \"1\";\n        notificacion.style.transform = \"translateY(0)\";\n    }, 100);\n\n    // Eliminar la notificación después de 4 segundos con animación\n    setTimeout(() => {\n        notificacion.style.opacity = \"0\";\n        notificacion.style.transform = \"translateY(-20px)\";\n        setTimeout(() => {\n            notificacion.remove();\n        }, 300);\n    }, 4000);\n}\n"]}