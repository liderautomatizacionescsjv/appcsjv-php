{"version":3,"sources":["asignacion.js"],"names":["document","addEventListener","modal","getElementById","btnAbrir","btnCerrar","querySelector","form","cerrarModalAsignacion","style","display","async","respuestaGrupos","fetch","grupos","json","selectGrupo","innerHTML","forEach","grupo","idgrupo","nombre","respuestaAsignaturas","asignaturas","selectAsignatura","asignatura","idasignatura","error","console","cargarOpciones","event","preventDefault","grupoid","value","cursoid","respuesta","method","headers","Content-Type","body","JSON","stringify","exito","alert"],"mappings":"AAAAA,SAASC,iBAAiB,oBAAoB,WAC1C,MAAMC,EAAQF,SAASG,eAAe,mBAChCC,EAAWJ,SAASG,eAAe,kBACnCE,EAAYL,SAASM,cAAc,UACnCC,EAAOP,SAASG,eAAe,kBAarC,SAASK,IACLN,EAAMO,MAAMC,QAAU,OAX1BN,EAASH,iBAAiB,SAAS,WAC/BC,EAAMO,MAAMC,QAAU,OAc1BC,iBACI,IACI,MAAMC,QAAwBC,MAAM,eAC9BC,QAAeF,EAAgBG,OAE/BC,EAAchB,SAASG,eAAe,eAC5Ca,EAAYC,UAAY,8CACxBH,EAAOI,QAAQC,IACXH,EAAYC,WAAa,kBAAkBE,EAAMC,YAAYD,EAAME,oBAGvE,MAAMC,QAA6BT,MAAM,oBACnCU,QAAoBD,EAAqBP,OAEzCS,EAAmBxB,SAASG,eAAe,oBACjDqB,EAAiBP,UAAY,8CAC7BM,EAAYL,QAAQO,IAChBD,EAAiBP,WAAa,kBAAkBQ,EAAWC,iBAAiBD,EAAWJ,oBAE7F,MAAOM,GACLC,QAAQD,MAAM,2BAA4BA,IAjC9CE,MAIJxB,EAAUJ,iBAAiB,SAAS,WAChCO,OAiCJD,EAAKN,iBAAiB,UAAUU,eAAgBmB,GAC5CA,EAAMC,iBAEN,MAAMC,EAAUhC,SAASG,eAAe,eAAe8B,MACjDC,EAAUlC,SAASG,eAAe,oBAAoB8B,MAE5D,GAAKD,GAAYE,EAKjB,IACI,MAAMC,QAAkBtB,MAAM,0BAA2B,CACrDuB,OAAQ,OACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAU,CAAET,QAAAA,EAASE,QAAAA,aAGZC,EAAUpB,QAEpB2B,OACVC,MAAM,qCACNnC,KAEAmC,MAAM,kCAEZ,MAAOhB,GACLC,QAAQD,MAAM,iCAAkCA,QAtBhDgB,MAAM","file":"asignacion.min.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n    const modal = document.getElementById(\"modalAsignacion\");\n    const btnAbrir = document.getElementById(\"asignar-grupos\");\n    const btnCerrar = document.querySelector(\".close\");\n    const form = document.getElementById(\"formAsignacion\");\n\n    // Abrir el modal\n    btnAbrir.addEventListener(\"click\", function () {\n        modal.style.display = \"flex\";\n        cargarOpciones();\n    });\n\n    // Cerrar el modal\n    btnCerrar.addEventListener(\"click\", function () {\n        cerrarModalAsignacion();\n    });\n\n    function cerrarModalAsignacion() {\n        modal.style.display = \"none\";\n    }\n\n    // Cargar opciones de grupos y asignaturas\n    async function cargarOpciones() {\n        try {\n            const respuestaGrupos = await fetch(\"/api/grupos\");\n            const grupos = await respuestaGrupos.json();\n\n            const selectGrupo = document.getElementById(\"selectGrupo\");\n            selectGrupo.innerHTML = '<option value=\"\">-- Seleccionar --</option>';\n            grupos.forEach(grupo => {\n                selectGrupo.innerHTML += `<option value=\"${grupo.idgrupo}\">${grupo.nombre}</option>`;\n            });\n\n            const respuestaAsignaturas = await fetch(\"/api/asignaturas\");\n            const asignaturas = await respuestaAsignaturas.json();\n\n            const selectAsignatura = document.getElementById(\"selectAsignatura\");\n            selectAsignatura.innerHTML = '<option value=\"\">-- Seleccionar --</option>';\n            asignaturas.forEach(asignatura => {\n                selectAsignatura.innerHTML += `<option value=\"${asignatura.idasignatura}\">${asignatura.nombre}</option>`;\n            });\n        } catch (error) {\n            console.error(\"Error cargando opciones:\", error);\n        }\n    }\n\n    // Enviar asignaci贸n al servidor\n    form.addEventListener(\"submit\", async function (event) {\n        event.preventDefault();\n\n        const grupoid = document.getElementById(\"selectGrupo\").value;\n        const cursoid = document.getElementById(\"selectAsignatura\").value;\n\n        if (!grupoid || !cursoid) {\n            alert(\"Debe seleccionar un grupo y una asignatura\");\n            return;\n        }\n\n        try {\n            const respuesta = await fetch(\"/api/guardar-asignacion\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({ grupoid, cursoid })\n            });\n\n            const resultado = await respuesta.json();\n\n            if (resultado.exito) {\n                alert(\"Asignaci贸n guardada correctamente\");\n                cerrarModalAsignacion();\n            } else {\n                alert(\"Error al guardar la asignaci贸n\");\n            }\n        } catch (error) {\n            console.error(\"Error guardando la asignaci贸n:\", error);\n        }\n    });\n});\n"]}