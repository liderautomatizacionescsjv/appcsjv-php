{"version":3,"sources":["prueba.js"],"names":["usuarioid","document","getElementById","dataset","id","console","log","modal","btnAbrir","btnCerrar","form","cerrarModalAsignacion","style","display","async","cargarOpciones","respuestaGrupos","fetch","grupos","json","selectGrupo","innerHTML","forEach","grupo","idgrupo","nombre","respuestaAsignaturas","asignaturas","selectAsignatura","asignatura","idasignatura","error","addEventListener","event","preventDefault","grupoid","value","cursoid","respuesta","method","headers","Content-Type","body","JSON","stringify","docenteid","resultado","exito","mostrarNotificacion","cargarAsignaciones"],"mappings":"AAAA,MAAMA,UAAYC,SAASC,eAAe,cAAcC,QAAQC,GAC5DC,QAAQC,IAAI,cAAeN,WAE3B,MAAMO,MAAQN,SAASC,eAAe,mBAChCM,SAAWP,SAASC,eAAe,kBACnCO,UAAYR,SAASC,eAAe,UACpCQ,KAAOT,SAASC,eAAe,kBAarC,SAASS,wBACLJ,MAAMK,MAAMC,QAAU,OA6C1BC,eAAeC,iBACX,IACI,MAAMC,QAAwBC,MAAM,eAC9BC,QAAeF,EAAgBG,OAE/BC,EAAcnB,SAASC,eAAe,eAC5CkB,EAAYC,UAAY,8CACxBH,EAAOI,QAAQC,IACXH,EAAYC,WAAa,kBAAkBE,EAAMC,YAAYD,EAAME,oBAGvE,MAAMC,QAA6BT,MAAM,oBACnCU,QAAoBD,EAAqBP,OAEzCS,EAAmB3B,SAASC,eAAe,oBACjD0B,EAAiBP,UAAY,8CAC7BM,EAAYL,QAAQO,IAChBD,EAAiBP,WAAa,kBAAkBQ,EAAWC,iBAAiBD,EAAWJ,oBAE7F,MAAOM,GACL1B,QAAQ0B,MAAM,8BAA+BA,IA5ErDvB,SAASwB,iBAAiB,SAAS,WAC/BzB,MAAMK,MAAMC,QAAU,OACtBE,oBAIJN,UAAUuB,iBAAiB,SAAS,WAChCrB,2BAQJD,KAAKsB,iBAAiB,UAAUlB,eAAgBmB,GAC5CA,EAAMC,iBAEN,MAAMC,EAAUlC,SAASC,eAAe,eAAekC,MACjDC,EAAUpC,SAASC,eAAe,oBAAoBkC,MAE5D,GAAKD,GAAYE,EAKjB,IACI,MAAMC,QAAkBrB,MAAM,+CAAgD,CAC1EsB,OAAQ,OACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMC,KAAKC,UAAU,CACjBC,UAAW7C,UACXmC,QAASA,EACTE,QAASA,MAIXS,QAAkBR,EAAUnB,OAClCd,QAAQC,IAAI,0BAA2BwC,GAEnCA,EAAUC,OACVC,oBAAoB,uCACpBrC,wBACAsC,sBAEAD,oBAAoB,wCAE1B,MAAOjB,GACL1B,QAAQ0B,MAAM,qBAAsBA,GACpCiB,oBAAoB,iDA7BpBA,oBAAoB","file":"prueba.min.js","sourcesContent":["const usuarioid = document.getElementById('usuario-id').dataset.id;\n    console.log(\"Usuario ID:\", usuarioid);\n\n    const modal = document.getElementById(\"modalAsignacion\");\n    const btnAbrir = document.getElementById(\"asignar-grupos\");\n    const btnCerrar = document.getElementById(\"cerrar\");\n    const form = document.getElementById(\"formAsignacion\");\n\n    // ‚úÖ Abrir el modal y cargar opciones\n    btnAbrir.addEventListener(\"click\", function () {\n        modal.style.display = \"flex\";\n        cargarOpciones();\n    });\n\n    // ‚úÖ Cerrar el modal\n    btnCerrar.addEventListener(\"click\", function () {\n        cerrarModalAsignacion();\n    });\n\n    function cerrarModalAsignacion() {\n        modal.style.display = \"none\";\n    }\n\n    // ‚úÖ Evento submit para guardar asignaci√≥n\n    form.addEventListener(\"submit\", async function (event) {\n        event.preventDefault(); // Evitar recarga de la p√°gina\n\n        const grupoid = document.getElementById(\"selectGrupo\").value;\n        const cursoid = document.getElementById(\"selectAsignatura\").value;\n\n        if (!grupoid || !cursoid) {\n            mostrarNotificacion(\"‚ö†Ô∏è Debes seleccionar un grupo y una asignatura.\");\n            return;\n        }\n\n        try {\n            const respuesta = await fetch(\"http://localhost:3002/api/guardar-asignacion\", {\n                method: 'POST',\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    docenteid: usuarioid,\n                    grupoid: grupoid,\n                    cursoid: cursoid\n                })\n            });\n\n            const resultado = await respuesta.json();\n            console.log(\"üì• Respuesta de la API:\", resultado);\n\n            if (resultado.exito) {\n                mostrarNotificacion(\"‚úÖ Asignaci√≥n guardada correctamente\");\n                cerrarModalAsignacion();\n                cargarAsignaciones(); // üîÑ Recargar las asignaciones en la UI\n            } else {\n                mostrarNotificacion(\"‚ö†Ô∏è Error al registrar la asignaci√≥n.\");\n            }\n        } catch (error) {\n            console.error(\"‚ö†Ô∏è Error en fetch:\", error);\n            mostrarNotificacion(\"‚ö†Ô∏è Error en la conexi√≥n con el servidor.\");\n        }\n    });\n\n    // ‚úÖ Cargar opciones de grupos y asignaturas\n    async function cargarOpciones() {\n        try {\n            const respuestaGrupos = await fetch(\"/api/grupos\");\n            const grupos = await respuestaGrupos.json();\n\n            const selectGrupo = document.getElementById(\"selectGrupo\");\n            selectGrupo.innerHTML = '<option value=\"\">-- Seleccionar --</option>';\n            grupos.forEach(grupo => {\n                selectGrupo.innerHTML += `<option value=\"${grupo.idgrupo}\">${grupo.nombre}</option>`;\n            });\n\n            const respuestaAsignaturas = await fetch(\"/api/asignaturas\");\n            const asignaturas = await respuestaAsignaturas.json();\n\n            const selectAsignatura = document.getElementById(\"selectAsignatura\");\n            selectAsignatura.innerHTML = '<option value=\"\">-- Seleccionar --</option>';\n            asignaturas.forEach(asignatura => {\n                selectAsignatura.innerHTML += `<option value=\"${asignatura.idasignatura}\">${asignatura.nombre}</option>`;\n            });\n        } catch (error) {\n            console.error(\"‚ö†Ô∏è Error cargando opciones:\", error);\n        }\n    }"]}